"use strict";(self.webpackChunkssr=self.webpackChunkssr||[]).push([[3571],{"./src/stories/form/InputPhoneWithDropdown.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>InputPhoneWithDropdown_stories});var react=__webpack_require__("./node_modules/react/index.js"),StoreDecorator=__webpack_require__("./.storybook/StoreDecorator.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),appAction=__webpack_require__("./src/actions/appAction.js"),CountryItemPanel=__webpack_require__("./src/components/auth/common/components/CountryItemPanel/CountryItemPanel.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CountryItemWithCode=props=>{const country=props.country,prefix=props.isRequest?country.phonePrefix:country.prefix;return(0,jsx_runtime.jsx)(CountryItemPanel.Z,{flagIconName:country.code,isSelectedCountry:props.iso2===country.code,onClick:()=>{props.onCountryItemClick(country.code,prefix,country.name,country.nameEn)},countryName:country.name,countryPrefix:prefix})};CountryItemWithCode.displayName="CountryItemWithCode";CountryItemWithCode.__docgenInfo={description:"",methods:[],displayName:"CountryItemWithCode"};const search_CountryItemWithCode=(0,es.$j)((()=>({})),{togglePopup:appAction.zI})(CountryItemWithCode);var CountryLetterItem=__webpack_require__("./src/components/auth/common/components/CountryItemPanel/CountryLetterItem.js"),dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),PopupNew=__webpack_require__("./src/components/common/Popup/PopupNew.jsx"),extraAction=__webpack_require__("./src/actions/extraAction.js"),utils=__webpack_require__("./src/helpers/utils.js"),amplitude_esm=__webpack_require__("./node_modules/amplitude-js/amplitude.esm.js"),ComponentNames=__webpack_require__("./src/constants/ComponentNames.js"),selectors=__webpack_require__("./src/hooks/selectors.js"),colors=__webpack_require__("./src/theme/colors.js"),FlagIcon=__webpack_require__("./src/components/common/FlagIcon/FlagIcon.jsx"),PopupPortal=__webpack_require__("./src/components/common/Popup/PopupPortal.jsx"),Text=__webpack_require__("./src/components/common/Text/Text.jsx"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),DangerouslyHtml=__webpack_require__("./src/components/common/DangerouslyHtml/DangerouslyHtml.jsx"),PopupButton=__webpack_require__("./src/components/common/Popup/PopupButton.jsx"),SimplePopup=__webpack_require__("./src/components/common/Popup/SimplePopup.jsx");const TextPopup=props=>{return(0,jsx_runtime.jsx)(SimplePopup.Z,{text:(text=props.text,(0,jsx_runtime.jsx)(DangerouslyHtml.E,{dangerouslyHtml:text})),popupRef:props.popupRef,children:(0,jsx_runtime.jsx)(PopupButton.Z,{iconName:"check",text:props.buttonText,onClick:()=>{var _props$popupRef,_props$popupRef$curre;(props.onClick&&props.onClick(),null!==(_props$popupRef=props.popupRef)&&void 0!==_props$popupRef&&_props$popupRef.current)?null===(_props$popupRef$curre=props.popupRef.current)||void 0===_props$popupRef$curre||_props$popupRef$curre.close():props.togglePopup(!1)}})});var text};TextPopup.displayName="TextPopup",TextPopup.__docgenInfo={description:"",methods:[],displayName:"TextPopup",props:{popupRef:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"shape",value:{current:{name:"object",required:!1}}},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}};const popups_TextPopup=(0,es.$j)(null,{togglePopup:appAction.zI})(TextPopup);TextPopup.propTypes={onClick:prop_types_default().func,popupRef:prop_types_default().shape({current:prop_types_default().object})},TextPopup.defaultProps={popupRef:null};const CurrencyAbbr=styled_components_browser_esm.ZP.span.withConfig({displayName:"CountryItem__CurrencyAbbr",componentId:"sc-1j5m0eb-0"})(["&:before{content:'·';display:inline-block;margin:0 4px;}&:first-child:before{display:none;}"]),RecentCountryItem=(0,styled_components_browser_esm.ZP)(dist.rU).withConfig({displayName:"CountryItem__RecentCountryItem",componentId:"sc-1j5m0eb-1"})(["padding:16px 8px;width:33.33%;min-width:33.33%;border-radius:16px;display:flex;flex-direction:column;text-align:center;box-sizing:border-box;&:hover{background:",";}"],colors.Z.superLightGray),FlagWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"CountryItem__FlagWrapper",componentId:"sc-1j5m0eb-2"})(["margin-bottom:8px;"]),CountryItemPureComponent=props=>{var _country$currencies;const[popup,setPopup]=(0,react.useState)(""),popupRef=(0,react.useRef)(null),{recipientList,pocket:isGA,searchCountryName}=(0,selectors.DL)(),country=props.country,userCountry=props.userCountry,amplitudeFromButton=Array.isArray(recipientList)&&recipientList.length>0?"recipient_list":" transfer_button";(0,react.useEffect)((()=>{searchCountryName===country.name&&(click({},country),props.updateExtraByName("searchCountryName",null))}),[]);const getHref=countryCode=>`${props.sendUrIPrefix}/${(0,utils.UR)(countryCode)}/delivery`,click=(e,country)=>{var _e$preventDefault,_popupRef$current;if((country=>{var _country$currencies$;isGA||amplitude_esm.Z.getInstance().logEvent("Receiving Country Selected",{country:country.nameEn,suggested:!!props.suggestedCountry,currency:null===(_country$currencies$=country.currencies[0])||void 0===_country$currencies$?void 0:_country$currencies$.code,from:amplitudeFromButton})})(country),country.disabled)null===(_e$preventDefault=e.preventDefault)||void 0===_e$preventDefault||_e$preventDefault.call(e),setPopup(ComponentNames.g),null===(_popupRef$current=popupRef.current)||void 0===_popupRef$current||_popupRef$current.open(country);else if(props.onCountryItemClick){var _e$preventDefault2;null===(_e$preventDefault2=e.preventDefault)||void 0===_e$preventDefault2||_e$preventDefault2.call(e),props.onCountryItemClick(e,country,getHref,props.ccyField)}},getItemHref=()=>{var _country$currencies$2;null===(_country$currencies$2=country.currencies[0])||void 0===_country$currencies$2||_country$currencies$2.code;return getHref(country.code)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[props.isLongPanel?(0,jsx_runtime.jsx)(CountryItemPanel.Z,{to:props.sendUrIPrefix?getItemHref():null,onClick:e=>click(e,country),flagIconName:country.code,countryName:country.name,countryCurrency:null===(_country$currencies=country.currencies)||void 0===_country$currencies?void 0:_country$currencies.map((ccy=>(0,jsx_runtime.jsx)(CurrencyAbbr,{children:ccy.code},`cnrCode_${country.code}_ccy_${ccy.code}`))),showCurrency:props.showCurrency}):(0,jsx_runtime.jsxs)(RecentCountryItem,{to:getItemHref(),onClick:e=>click(e,country),children:[(0,jsx_runtime.jsx)(FlagWrapper,{children:(0,jsx_runtime.jsx)(FlagIcon.U,{name:country.code,isDisabled:country.disabled,size:"small"})}),(0,jsx_runtime.jsx)(Text.x,{size:"secondary",color:country.disabled?"mediumGray":"darkGray",children:country.name})]}),(0,jsx_runtime.jsx)(PopupNew.Z,{ref:popupRef,getPopupComponent:country=>{const args=[null==userCountry?void 0:userCountry.notificationNameFrom,null==country?void 0:country.notificationNameTo];if(popup===ComponentNames.g)return(0,jsx_runtime.jsx)(popups_TextPopup,{text:(0,utils.ve)(props.notificationText,args),buttonText:props.gotIt,popupRef})},as:PopupPortal.Z})]})};CountryItemPureComponent.defaultProps={isLongPanel:!0};const common_CountryItem=(0,es.$j)((()=>({})),{updateExtraByName:extraAction.GW})(CountryItemPureComponent);CountryItemPureComponent.__docgenInfo={description:"",methods:[],displayName:"CountryItemPureComponent",props:{isLongPanel:{defaultValue:{value:"true",computed:!1},required:!1}}};const FullCountryList=props=>{const getFirstLetter=name=>name?name.charAt(0):null;if(Array.isArray(props.countries)&&props.countries.length>0){let firstLetter="";return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:props.countries.map((country=>{const key=`countryList_${country.code}`;return props.hideLetter||firstLetter===getFirstLetter(country.name)?props.countryWithCode?(0,jsx_runtime.jsx)(search_CountryItemWithCode,{country,iso2:props.iso2,onCountryItemClick:props.onCountryItemClick,isRequest:props.isRequest},key):(0,jsx_runtime.jsx)(common_CountryItem,{gotIt:props.gotIt,userCountry:props.userCountry,notificationText:props.notificationText,country,sendUrIPrefix:props.sendUrIPrefix,onCountryItemClick:props.onCountryItemClick,ccyField:props.ccyField,showCurrency:props.showCurrency},key):(firstLetter=getFirstLetter(country.name),(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(CountryLetterItem.Z,{letter:firstLetter}),props.countryWithCode&&(0,jsx_runtime.jsx)(search_CountryItemWithCode,{country,iso2:props.iso2,onCountryItemClick:props.onCountryItemClick,isRequest:props.isRequest}),!props.countryWithCode&&(0,jsx_runtime.jsx)(common_CountryItem,{country,gotIt:props.gotIt,userCountry:props.userCountry,notificationText:props.notificationText,sendUrIPrefix:props.sendUrIPrefix,onCountryItemClick:props.onCountryItemClick,ccyField:props.ccyField,showCurrency:props.showCurrency})]},key))}))})}return!1};FullCountryList.defaultProps={hideLetter:!1},FullCountryList.__docgenInfo={description:"",methods:[],displayName:"FullCountryList",props:{hideLetter:{defaultValue:{value:"false",computed:!1},required:!1}}};const search_FullCountryList=FullCountryList;class CountrySearchService{static search(countries,value){const term=value,termLength=term.length;return countries.filter((country=>{var _ref;const byName=void 0===term||(0,utils.UR)(country.name).indexOf((0,utils.UR)(term))>=0,bySynonym=(0,utils.UR)(country.synonym).indexOf((0,utils.UR)(term))>=0,byCurrencyCode=Array.isArray(country.currencies)&&country.currencies.find((currency=>(0,utils.UR)(currency.code).indexOf((0,utils.UR)(term))>=0)),byPrefix=(null===(_ref=country.phonePrefix??country.prefix)||void 0===_ref?void 0:_ref.indexOf(""+term))>=0;return 1===termLength?byName||byCurrencyCode||byPrefix:byName||bySynonym||byCurrencyCode||byPrefix}))}}var SearchBar=__webpack_require__("./src/components/form/components/SearchBar/SearchBar.jsx");const CountrySearchBar=props=>{const{searchCountryName}=(0,selectors.DL)(),timerID=(0,react.useRef)(null),searchRef=(0,react.useRef)(null);(0,react.useEffect)((()=>(searchCountryName&&(search(searchCountryName),searchRef.current.value=searchCountryName),()=>{clearTimeout(timerID.current)})),[]);const search=value=>{const term=value,resultList=CountrySearchService.search(props.countries,value);props.setCountryList({countryList:resultList,hideLetter:!!term,query:term})};return(0,jsx_runtime.jsx)(SearchBar.E,{searchRef,placeholder:props.placeholder,onChange:e=>{return value=e.target.value,timerID.current=(0,utils.HT)(timerID.current,(()=>search(value)));var value},onCloseButtonClick:e=>props.toggleSearch(e,!1)})};CountrySearchBar.displayName="CountrySearchBar",CountrySearchBar.__docgenInfo={description:"",methods:[],displayName:"CountrySearchBar"};var NotFoundResult=__webpack_require__("./src/components/auth/common/search/NotFoundResult.jsx"),NavBar=__webpack_require__("./src/components/common/Layout/NavBar/NavBar.jsx"),ModalComponent=__webpack_require__("./src/components/utils/ModalComponent.jsx");const FullViewCountrySearch=props=>{const[countryList,setCountryList]=(0,react.useState)({countryList:props.countries,hideLetter:!1,query:""});return(0,jsx_runtime.jsxs)(ModalComponent.Z,{canCloseModal:!1,isVerticalCentered:0===countryList.countryList.length,children:[countryList.countryList.length>0?(0,jsx_runtime.jsx)(search_FullCountryList,{gotIt:props.gotIt,userCountry:props.userCountry,notificationText:props.notificationText,countries:countryList.countryList,hideLetter:countryList.hideLetter,sendUrIPrefix:props.sendUrIPrefix,onCountryItemClick:props.onCountryItemClick,ccyField:props.ccyField,countryWithCode:props.countryWithCode,iso2:props.iso2,isRequest:props.isRequest,showCurrency:props.showCurrency}):(0,jsx_runtime.jsx)(NotFoundResult.l,{notFoundMessage:(0,utils.ve)(props.searchNoResult,countryList.query)}),(0,jsx_runtime.jsx)(NavBar.l,{isSearchBar:!0,children:(0,jsx_runtime.jsx)(CountrySearchBar,{backUrl:props.backUrl,setCountryList,toggleSearch:props.toggleSearch,setBackUrl:props.setBackUrl,countries:props.countries,placeholder:props.placeholder})})]})};FullViewCountrySearch.displayName="FullViewCountrySearch",FullViewCountrySearch.__docgenInfo={description:"",methods:[],displayName:"FullViewCountrySearch"};const RecentCountriesWithCode=props=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Text.x,{variant:"div",color:"mediumGray",size:"subheader",indent:"adaptive-16-24",children:props.suggested}),props.suggestedCountries.map((country=>{const key=`countryList_${country.code}`;return(0,jsx_runtime.jsx)(search_CountryItemWithCode,{country,iso2:props.iso2,onCountryItemClick:props.onCountryItemClick},key)}))]});RecentCountriesWithCode.__docgenInfo={description:"",methods:[],displayName:"RecentCountriesWithCode"};const search_RecentCountriesWithCode=RecentCountriesWithCode;var UrlConstants=__webpack_require__("./src/constants/UrlConstants.js"),HeaderPanel=__webpack_require__("./src/components/common/Layout/HeaderPanel/HeaderPanel.jsx"),Row=__webpack_require__("./src/components/common/Layout/Row.jsx"),media=__webpack_require__("./src/theme/media.js"),Icon=__webpack_require__("./src/components/common/Icon/Icon.jsx"),NewInputWrapper=__webpack_require__("./src/components/form-multi/NewInputWrapper.js");const SearchIconWrap=styled_components_browser_esm.ZP.div.withConfig({displayName:"InputSearch__SearchIconWrap",componentId:"sc-ooc413-0"})(["margin-right:16px;","{margin-right:24px;}"],media.Z.desktop1920),InputSearch_focus=e=>{if(e.currentTarget){e.currentTarget.firstElementChild.focus()}else console.log("Focus method not support")},InputSearch=props=>(0,jsx_runtime.jsx)(Row.X,{indent:"32px",onClick:e=>props.toggle(e,!0),children:(0,jsx_runtime.jsx)(NewInputWrapper.Z,{name:"search",setFocus:InputSearch_focus,leftInputComponent:(0,jsx_runtime.jsx)(SearchIconWrap,{children:(0,jsx_runtime.jsx)(Icon.J,{name:"search",color:"mediumGray"})}),children:(0,jsx_runtime.jsx)("input",{type:"search",placeholder:props.placeholder,autoFocus:props.autoFocus})})});InputSearch.displayName="InputSearch",InputSearch.__docgenInfo={description:"",methods:[],displayName:"InputSearch"};const SelectCountryWithCodeScreen=props=>{var _props$suggestedCount;const[isFullViewSearch,toggleIsFullViewSearch]=(0,react.useState)(!1),toggleSearch=(e,show)=>{e.preventDefault(),toggleIsFullViewSearch(show)},fullViewSearchBackUri=props.fullViewSearchBackUri;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isFullViewSearch?(0,jsx_runtime.jsx)(FullViewCountrySearch,{countries:props.isRequest?props.requestCountries:props.countries,title:props.title,countriesHeader:props.countriesHeader,placeholder:props.fullScreenSearchPlaceholder,searchNoResult:props.searchNoResult,toggleSearch,onCountryItemClick:props.onCountryItemClick,backUrl:fullViewSearchBackUri,countryWithCode:props.countryWithCode,iso2:props.iso2,isRequest:props.isRequest}):(0,jsx_runtime.jsxs)(ModalComponent.Z,{isIconClose:!0,onCloseIconClick:props.closeModal,modalRef:props.modalRef,children:[(0,jsx_runtime.jsx)(HeaderPanel.y,{title:props.title}),!props.isRequest&&(null===(_props$suggestedCount=props.suggestedCountries)||void 0===_props$suggestedCount?void 0:_props$suggestedCount.length)>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Row.X,{indent:"48px",children:(0,jsx_runtime.jsx)(search_RecentCountriesWithCode,{countries:props.countries,suggestedCountries:props.suggestedCountries,suggested:props.suggested,iso2:props.iso2,onCountryItemClick:props.onCountryItemClick,countryWithCode:props.countryWithCode})}),(0,jsx_runtime.jsx)(Text.x,{variant:"div",color:"mediumGray",size:"subheader",indent:"adaptive-32-48",children:props.allCountries})]}),(0,jsx_runtime.jsx)(InputSearch,{placeholder:props.searchPlaceholder,toggle:toggleSearch}),(0,jsx_runtime.jsx)(search_FullCountryList,{countries:props.isRequest?props.requestCountries:props.countries,iso2:props.iso2,onCountryItemClick:props.onCountryItemClick,countryWithCode:props.countryWithCode,isRequest:props.isRequest})]})})};SelectCountryWithCodeScreen.__docgenInfo={description:"",methods:[],displayName:"SelectCountryWithCodeScreen"};const search_SelectCountryWithCodeScreen=(0,es.$j)((state=>({lang:state.language.lang,countries:state.extra.countries,suggestedCountries:state.extra.suggestedCountries,title:state.messages.pageMessages.title,countriesHeader:state.messages.pageMessages.countriesHeader,searchPlaceholder:state.messages.pageMessages.searchPlaceholder,fullScreenSearchPlaceholder:state.messages.pageMessages.fullScreenSearchPlaceholder,searchNoResult:state.messages.pageMessages.searchNoResult,allCountries:state.messages.pageMessages.allCountries,suggested:state.messages.pageMessages.suggested,fullViewSearchBackUri:UrlConstants.RVW})),{toggleModal:appAction.$J})(SelectCountryWithCodeScreen);var lib=__webpack_require__("./node_modules/react-phone-input-2/lib/lib.js"),lib_default=__webpack_require__.n(lib),InputBase=__webpack_require__("./src/components/form-multi/InputBase.js"),form_multi_utils=__webpack_require__("./src/components/form-multi/utils.js"),FieldType=__webpack_require__("./src/constants/FieldType.js"),utilsMasks=__webpack_require__("./src/constants/utilsMasks.js"),customPropTypes=__webpack_require__("./src/helpers/customPropTypes.js");const shouldUpdateCountryCode=(defaultCountry,selectedCountry)=>("do"!==defaultCountry||"us"!==selectedCountry)&&selectedCountry!==defaultCountry,NewInputPhoneHOC=props=>{const ref=(0,react.useRef)(null),notFirstRender=(0,react.useRef)(!1);!function useSearchCountry(ref,_ref){let{field,...props}=_ref;(0,react.useEffect)((()=>{if(field.value){ref.current.searchCountry(field.value);const{selectedCountry}=ref.current.state;selectedCountry&&props.onChangeHandler&&props.onChangeHandler(field.value,{countryCode:selectedCountry.iso2})}else props.defaultCountry&&ref.current.updateCountry(props.defaultCountry)}),[])}(ref,props),function useChangeDefaultCountry(ref,notFirstRender,_ref2){let{defaultCountry,field,formName,...props}=_ref2;(0,react.useEffect)((()=>{if(notFirstRender.current){const{selectedCountry}=ref.current.state;var _ref$current;field.value&&!shouldUpdateCountryCode(defaultCountry,null==selectedCountry?void 0:selectedCountry.iso2)||ref.current.updateCountry(defaultCountry),props.changeFormFieldValue&&(props.getUserInputWithoutPrefix(null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.props.value.replace(selectedCountry.countryCode,"")),ref.current.value=props.userInputWithoutPrefix,props.changeFormFieldValue(formName,props.prefix+props.userInputWithoutPrefix,"phone"))}else notFirstRender.current=!0}),[defaultCountry])}(ref,notFirstRender,props);const{field}=props,phoneNumberValidation=e=>{var _ref$current4;const{selectedCountry}=null===(_ref$current4=ref.current)||void 0===_ref$current4?void 0:_ref$current4.state;let value=e.target.value.replace(/\D+/g,"");return props.userInputRef&&(props.userInputRef.current=value),value=(0,form_multi_utils.lK)(value,props.iso2),props.getUserInputWithoutPrefix&&props.getUserInputWithoutPrefix(value.replace(selectedCountry.countryCode,"")),value};return(0,jsx_runtime.jsx)(lib_default(),{ref,inputProps:{name:field.name,autoFocus:props.focus,autoComplete:"tel"},specialLabel:"",value:field.value||"",disableDropdown:!0,countryCodeEditable:!props.isPhoneTypeStrict,placeholder:"",formName:field.canonicalPath||field.name,isFocused:props.isFocused,defaultCountry:props.defaultCountry,defaultMask:"... ... ... ... ..",masks:utilsMasks.Qd,excludeCountries:utilsMasks.$M,isFilled:!0,onChange:(value,data)=>{var _props$setIsFocused3;props.isFocused||(null===(_props$setIsFocused3=props.setIsFocused)||void 0===_props$setIsFocused3||_props$setIsFocused3.call(props,!0));const pureValue=value.replace(/\D+/g,"");(0,form_multi_utils.$)(props.formName,pureValue,field,props.changeFormField).then((phone=>{var _ref$current5;return props.onChangeHandler&&props.onChangeHandler(phone.value,data,null==ref||null===(_ref$current5=ref.current)||void 0===_ref$current5||null===(_ref$current5=_ref$current5.state)||void 0===_ref$current5?void 0:_ref$current5.selectedCountry)})).catch((e=>console.error(e)))},onKeyDown:e=>{if(13===e.keyCode&&props.submitByEnter&&props.submitRef&&props.submitRef.current){var _ref$current2;const{selectedCountry}=null===(_ref$current2=ref.current)||void 0===_ref$current2?void 0:_ref$current2.state,value=phoneNumberValidation(e);value!==selectedCountry.countryCode&&(0,form_multi_utils.Ql)(props.formName,value,field,props.changeFormField).catch((validateEvent=>console.error(validateEvent))).finally((()=>props.submitRef.current.click()))}},onFocus:()=>{var _props$setIsFocused2;null===(_props$setIsFocused2=props.setIsFocused)||void 0===_props$setIsFocused2||_props$setIsFocused2.call(props,!0);((null==field?void 0:field.isError)??!1)&&(0,form_multi_utils.HJ)(props.formName,field,props.changeFormField).then((()=>props.onFocus&&props.onFocus())).catch((e=>console.error(e)))},onBlur:e=>{var _ref$current3;const{selectedCountry}=null===(_ref$current3=ref.current)||void 0===_ref$current3?void 0:_ref$current3.state;var _props$setIsFocused;field.isError||(null===(_props$setIsFocused=props.setIsFocused)||void 0===_props$setIsFocused||_props$setIsFocused.call(props,!1));const value=phoneNumberValidation(e);value!==selectedCountry.countryCode&&(0,form_multi_utils.Ql)(props.formName,value,field,props.changeFormField).then((()=>props.onBlurHandler&&props.onBlurHandler(field.value,field))).catch((blureValidateEvent=>console.error(blureValidateEvent)))},enableLongNumbers:16,enableTerritories:!0})};NewInputPhoneHOC.displayName="NewInputPhoneHOC";const NewInputPhone=(0,InputBase.Z)(NewInputPhoneHOC);NewInputPhone.defaultProps={defaultCountry:"gb",submitByEnter:!1,focus:!1,isFilled:!0,isPhoneTypeStrict:!0},NewInputPhone.propTypes=(0,customPropTypes.$k)([FieldType.Kx,FieldType.n,FieldType.wv]);const form_NewInputPhone=NewInputPhone;NewInputPhoneHOC.__docgenInfo={description:"",methods:[],displayName:"NewInputPhoneHOC"};var formName=__webpack_require__("./src/constants/formName.js");const FlagIconDropdown=styled_components_browser_esm.ZP.div.withConfig({displayName:"InputPhoneWithDropdown__FlagIconDropdown",componentId:"sc-6dd8l0-0"})(["display:flex;padding-right:8px;margin-right:16px;border-right:1px solid ",";cursor:",";"],colors.Z.greyRgba28,(props=>props.isNonEditableCountry?"default":"pointer")),InputPhoneWithDropdown=props=>{const[isFocused,setIsFocused]=(0,react.useState)(!1),[iso2PhoneNonStrict,setIso2PhoneNonStrict]=(0,react.useState)(props.iso2);return(0,jsx_runtime.jsx)(form_NewInputPhone,{onChangeHandler:(value,data,selectedCountry)=>{var _props$onChangeHandle;!props.isPhoneTypeStrict&&null!=selectedCountry&&selectedCountry.iso2&&props.isNonEditableCountry?setIso2PhoneNonStrict(selectedCountry.iso2):null===(_props$onChangeHandle=props.onChangeHandler)||void 0===_props$onChangeHandle||_props$onChangeHandle.call(props,value,data)},onBlurHandler:props.onBlurHandler,userInputRef:props.userInputRef,field:props.field,submitRef:props.submitRef,defaultCountry:props.iso2,formName:props.formName,submitByEnter:props.submitByEnter,onFocus:props.onFocus,focus:props.focus,onChange:props.onChange,onKeyDown:props.onKeyDown,onBlur:props.onBlur,isFocused,setIsFocused,isNewInput:!0,iso2:props.iso2,changeFormFieldValue:props.changeFormFieldValue,prefix:props.prefix,isLoginInputError:props.isLoginInputError,hintButtonClick:props.hintButtonClick,errorCode:props.errorCode,getUserInputWithoutPrefix:props.getUserInputWithoutPrefix,userInputWithoutPrefix:props.userInputWithoutPrefix,isPhoneTypeStrict:props.isPhoneTypeStrict,leftInputComponent:(0,jsx_runtime.jsxs)(FlagIconDropdown,{onClick:()=>{if(props.formName===formName.dJ&&amplitude_esm.Z.getInstance().logEvent("Country Code List Opened"),props.isNonEditableCountry)return null;props.showCountryModal()},isNonEditableCountry:props.isNonEditableCountry,children:[(0,jsx_runtime.jsx)(FlagIcon.U,{name:props.isPhoneTypeStrict||!props.isNonEditableCountry?props.iso2:iso2PhoneNonStrict}),!props.isNonEditableCountry&&(0,jsx_runtime.jsx)(Icon.J,{name:"chevron-down",leftIndent:"4px"})]})})};InputPhoneWithDropdown.displayName="InputPhoneWithDropdown",InputPhoneWithDropdown.propTypes={isPhoneTypeStrict:prop_types_default().bool,isNonEditableCountry:prop_types_default().bool},InputPhoneWithDropdown.__docgenInfo={description:"",methods:[],displayName:"InputPhoneWithDropdown",props:{isPhoneTypeStrict:{description:"",type:{name:"bool"},required:!1},isNonEditableCountry:{description:"",type:{name:"bool"},required:!1}}};const form_InputPhoneWithDropdown=InputPhoneWithDropdown,ModalNew=react.forwardRef(((_ref,innerRef)=>{let{getComponent}=_ref;const[isOpen,setOpen]=(0,react.useState)(!1),[data,setData]=(0,react.useState)(null);return(0,react.useImperativeHandle)(innerRef,(()=>({open:function(){let curData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;setOpen(!0),curData&&setData(curData)},close:()=>{setOpen(!1),data&&setData(null)}})),[data]),isOpen?getComponent(data)||data:null}));ModalNew.propTypes={getComponent:prop_types_default().func.isRequired},ModalNew.__docgenInfo={description:"",methods:[],displayName:"ModalNew",props:{getComponent:{description:"",type:{name:"func"},required:!0}}};const utils_ModalNew=ModalNew;var _Example$parameters,_Example$parameters2;const InputPhoneWithDropdown_stories={title:"Form Components/InputPhoneWithDropdown",component:form_InputPhoneWithDropdown,decorators:[StoreDecorator.Z],parameters:{state:{form:{InputPhoneWithDropdownForm:{fields:{}}},language:{lang:"en"},messages:{pageMessages:{title:"Select the country code"}},extra:{countries:[{id:8,name:"Albania",nameEn:"Albania",synonym:"Albanien अल्बानिया Албания Albania Албания Albania Albania Albanie Albania 阿尔巴尼亚 Albánie Албанія Albania Albania Arnavutluk",code:"al",prefix:"+355",firstLetter:"A"},{id:9,name:"Algeria",nameEn:"Algeria",synonym:"Albanien अल्बानिया Албания Albania Албания Albania Albania Albanie Albania 阿尔巴尼亚 Albánie Албанія Albania Albania Arnavutluk",code:"dz",prefix:"+213",firstLetter:"A"}]}}}},Example=(args=>{const modalRef=(0,react.useRef)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(form_InputPhoneWithDropdown,{formName:"InputPhoneWithDropdownForm",iso2:"gb",showCountryModal:()=>{var _modalRef$current;null==modalRef||null===(_modalRef$current=modalRef.current)||void 0===_modalRef$current||_modalRef$current.open((0,jsx_runtime.jsx)(search_SelectCountryWithCodeScreen,{modalRef}))},...args}),(0,jsx_runtime.jsx)(utils_ModalNew,{ref:modalRef,getComponent:component=>component})]})}).bind({});Example.args={field:{name:"InputPhoneWithDropdown"}},Example.parameters={...Example.parameters,docs:{...null===(_Example$parameters=Example.parameters)||void 0===_Example$parameters?void 0:_Example$parameters.docs,source:{originalSource:"args => {\n  const modalRef = useRef(false);\n  return <>\n            <InputPhoneWithDropdown formName={'InputPhoneWithDropdownForm'} iso2={'gb'} showCountryModal={() => {\n      modalRef?.current?.open(<SelectCountryWithCodeScreen modalRef={modalRef} />);\n    }} {...args} />\n            <ModalNew ref={modalRef} getComponent={component => component} />\n        </>;\n}",...null===(_Example$parameters2=Example.parameters)||void 0===_Example$parameters2||null===(_Example$parameters2=_Example$parameters2.docs)||void 0===_Example$parameters2?void 0:_Example$parameters2.source}}};const __namedExportsOrder=["Example"]},"./src/actions/extraAction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GW:()=>updateExtraByName,pv:()=>addExtras});const updateExtraByName=(extraName,value)=>dispatch=>Promise.resolve(dispatch({type:"UPDATE_EXTRA_BY_NAME",extraName,value})),addExtras=extra=>dispatch=>Promise.resolve(dispatch({type:"ADD_EXTRAS",extra}))},"./src/components/auth/common/components/CountryItemPanel/CountryLetterItem.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _common_DiskBadge_DiskBadge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/common/DiskBadge/DiskBadge.jsx"),_common_Panel_Panel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/common/Panel/Panel.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const CountryLetterItem=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_common_Panel_Panel__WEBPACK_IMPORTED_MODULE_2__.s,{negativeMargin:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_common_DiskBadge_DiskBadge__WEBPACK_IMPORTED_MODULE_1__.b,{variant:"letterIndex",diskText:props.letter})});CountryLetterItem.displayName="CountryLetterItem",CountryLetterItem.__docgenInfo={description:"",methods:[],displayName:"CountryLetterItem"};const __WEBPACK_DEFAULT_EXPORT__=CountryLetterItem},"./src/components/common/DangerouslyHtml/DangerouslyHtml.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>DangerouslyHtml});__webpack_require__("./node_modules/react/index.js");var prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),xss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xss/lib/index.js"),_constants_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/constants/Constants.js"),_Text_Text__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/common/Text/Text.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DangerouslyHtml=props=>{const data=(0,xss__WEBPACK_IMPORTED_MODULE_1__.filterXSS)(props.dangerouslyHtml,props.sanitizeAllHtmlTags?_constants_Constants__WEBPACK_IMPORTED_MODULE_2__.wy4:_constants_Constants__WEBPACK_IMPORTED_MODULE_2__.ASq);return"text"===props.type?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Text_Text__WEBPACK_IMPORTED_MODULE_3__.x,{variant:props.variant,color:props.color,size:props.size,isPromo:props.isPromo,dangerouslySetInnerHTML:{__html:data}}):"span"===props.type?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span",{dangerouslySetInnerHTML:{__html:data}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{dangerouslySetInnerHTML:{__html:data}})};DangerouslyHtml.propTypes={type:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["text","span"]),dangerouslyHtml:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,isPromo:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,variant:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["h1","h2","h3","h4","h5","h6","pre","paragraph","div","span","link","button"]),size:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["display1","display2","header","main","secondary","subheader","tag"]),color:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["darkGray","mediumGray","lightGray","purple","purpleRgba40","red","white","whiteRgba48"]),sanitizeAllHtmlTags:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool},DangerouslyHtml.defaultProps={sanitizeAllHtmlTags:!1},DangerouslyHtml.__docgenInfo={description:"",methods:[],displayName:"DangerouslyHtml",props:{sanitizeAllHtmlTags:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},type:{description:"",type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'span'",computed:!1}]},required:!1},dangerouslyHtml:{description:"",type:{name:"string"},required:!1},isPromo:{description:"",type:{name:"bool"},required:!1},variant:{description:"",type:{name:"enum",value:[{value:"'h1'",computed:!1},{value:"'h2'",computed:!1},{value:"'h3'",computed:!1},{value:"'h4'",computed:!1},{value:"'h5'",computed:!1},{value:"'h6'",computed:!1},{value:"'pre'",computed:!1},{value:"'paragraph'",computed:!1},{value:"'div'",computed:!1},{value:"'span'",computed:!1},{value:"'link'",computed:!1},{value:"'button'",computed:!1}]},required:!1},size:{description:"",type:{name:"enum",value:[{value:"'display1'",computed:!1},{value:"'display2'",computed:!1},{value:"'header'",computed:!1},{value:"'main'",computed:!1},{value:"'secondary'",computed:!1},{value:"'subheader'",computed:!1},{value:"'tag'",computed:!1}]},required:!1},color:{description:"",type:{name:"enum",value:[{value:"'darkGray'",computed:!1},{value:"'mediumGray'",computed:!1},{value:"'lightGray'",computed:!1},{value:"'purple'",computed:!1},{value:"'purpleRgba40'",computed:!1},{value:"'red'",computed:!1},{value:"'white'",computed:!1},{value:"'whiteRgba48'",computed:!1}]},required:!1}}}},"./src/components/common/Layout/HeaderPanel/HeaderPanel.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>HeaderPanel});__webpack_require__("./node_modules/react/index.js");var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lib=__webpack_require__("./node_modules/xss/lib/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),colors=__webpack_require__("./src/theme/colors.js"),media=__webpack_require__("./src/theme/media.js"),Button=__webpack_require__("./src/components/common/Button/Button.jsx");const Container=styled_components_browser_esm.ZP.div.withConfig({displayName:"styles__Container",componentId:"sc-1min5s3-0"})(["margin-bottom:",";","{margin-bottom:",";}"],(props=>props.indentCompact?"32px":"48px"),media.Z.desktop1920,(props=>props.indentCompact?"48px":"72px")),Title=styled_components_browser_esm.ZP.div.withConfig({displayName:"styles__Title",componentId:"sc-1min5s3-1"})(["font-size:24px;line-height:36px;color:",";text-align:",";","{font-size:32px;line-height:48px;}"],colors.Z.codGray,(props=>props.isCentered?"center":""),media.Z.desktop1920),SubTitle=styled_components_browser_esm.ZP.div.withConfig({displayName:"styles__SubTitle",componentId:"sc-1min5s3-2"})(["font-size:17px;line-height:24px;color:",";margin-top:16px;","{font-size:20px;line-height:32px;}"],colors.Z.mediumGray,media.Z.desktop1920),RowButton=(0,styled_components_browser_esm.ZP)(Button.z).withConfig({displayName:"styles__RowButton",componentId:"sc-1min5s3-3"})(["margin-top:",";","{margin-top:",";}"],(props=>props.addTopMargin?"48px":"4px"),media.Z.tablet720,(props=>props.addTopMargin?"56px":"4px"));var Constants=__webpack_require__("./src/constants/Constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const HeaderPanel=props=>(0,jsx_runtime.jsxs)(Container,{indentCompact:props.indentCompact,children:[(0,jsx_runtime.jsx)(Title,{isCentered:props.isCentered,children:props.title}),props.subtitle&&(0,jsx_runtime.jsx)(SubTitle,{dangerouslySetInnerHTML:{__html:(0,lib.filterXSS)(props.subtitle,Constants.ASq)}}),!props.isGlobalFlow&&props.buttonRowCaption&&(0,jsx_runtime.jsx)(RowButton,{type:props.buttonRowType,variant:"row",size:props.buttonRowSizeFit?"fit":"tight",negativeMargin:!0,caption:props.buttonRowCaption,onClick:props.buttonRowOnClick,href:props.buttonRowHref,addTopMargin:props.addTopMargin})]});HeaderPanel.displayName="HeaderPanel",HeaderPanel.defaultProps={isGlobalFlow:!1},HeaderPanel.propTypes={isGlobalFlow:prop_types_default().bool,indentCompact:prop_types_default().bool,isCentered:prop_types_default().bool,title:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]),subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]),buttonRowType:prop_types_default().string,buttonRowCaption:prop_types_default().string,buttonRowOnClick:prop_types_default().func,buttonRowHref:prop_types_default().string,addTopMargin:prop_types_default().bool,buttonRowSizeFit:prop_types_default().bool},HeaderPanel.__docgenInfo={description:"",methods:[],displayName:"HeaderPanel",props:{isGlobalFlow:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},indentCompact:{description:"",type:{name:"bool"},required:!1},isCentered:{description:"",type:{name:"bool"},required:!1},title:{description:"",type:{name:"union",value:[{name:"string"},{name:"element"}]},required:!1},subtitle:{description:"",type:{name:"union",value:[{name:"string"},{name:"element"}]},required:!1},buttonRowType:{description:"",type:{name:"string"},required:!1},buttonRowCaption:{description:"",type:{name:"string"},required:!1},buttonRowOnClick:{description:"",type:{name:"func"},required:!1},buttonRowHref:{description:"",type:{name:"string"},required:!1},addTopMargin:{description:"",type:{name:"bool"},required:!1},buttonRowSizeFit:{description:"",type:{name:"bool"},required:!1}}}},"./src/constants/ComponentNames.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EA:()=>QR_POPUP,a0:()=>FRAUD_BLOCK_DISCLAIMER_MODAL,g:()=>TEXT_POPUP,ny:()=>FRAUD_BLOCK_INFO_MODAL});const TEXT_POPUP="TextPopup",QR_POPUP="qr",FRAUD_BLOCK_INFO_MODAL="FraudBlockInfoModal",FRAUD_BLOCK_DISCLAIMER_MODAL="FraudBlockDisclaimer"}}]);