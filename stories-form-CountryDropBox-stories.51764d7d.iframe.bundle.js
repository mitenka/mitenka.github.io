"use strict";(self.webpackChunkssr=self.webpackChunkssr||[]).push([[5635],{"./src/stories/form/CountryDropBox.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CountryDropBox_stories});var react=__webpack_require__("./node_modules/react/index.js"),StoreDecorator=__webpack_require__("./.storybook/StoreDecorator.js"),Row=__webpack_require__("./src/components/common/Layout/Row.jsx"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),InputText=__webpack_require__("./src/components/form-multi/InputText.js"),formAction=__webpack_require__("./src/actions/formAction.js"),Immutability=__webpack_require__("./src/helpers/Immutability.js"),SearchBar=__webpack_require__("./src/components/form/components/SearchBar/SearchBar.jsx"),CountryItemPanel=__webpack_require__("./src/components/auth/common/components/CountryItemPanel/CountryItemPanel.jsx"),NotFoundResult=__webpack_require__("./src/components/auth/common/search/NotFoundResult.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CountryDropBoxList=props=>{const searchRef=(0,react.useRef)(null),[itemsList,setItems]=(0,react.useState)(props.items);(0,react.useEffect)((()=>{searchRef.current.focus()}),[]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SearchBar.E,{placeholder:props.searchPlaceholder,onChange:props.isStrapiField?e=>{const term=e.target.value,resultList=props.items.filter((item=>void 0===term||null!==item&&null!==item.name&&item.name.toLowerCase().indexOf(term.toLowerCase())>=0));setItems(resultList)}:e=>{const term=e.target.value,resultList=props.items.filter((item=>void 0===term||null!==item&&null!==item.name&&item.name.toLowerCase().indexOf(term.toLowerCase())>=0||null!==item.synonym&&item.synonym.toLowerCase().indexOf(term.toLowerCase())>=0));setItems(resultList)},id:`search_field_${props.name}_${props.id}`,onCloseButtonClick:props.onCloseButtonClick,searchRef}),0===itemsList.length&&(0,jsx_runtime.jsx)(NotFoundResult.l,{notFoundMessage:props.searchDropBoxEmpty}),itemsList.length>0&&itemsList.map((item=>(0,jsx_runtime.jsx)("div",{id:`reg-country-${item.code}`,children:(0,jsx_runtime.jsx)(CountryItemPanel.Z,{onClick:e=>props.selectItem(e,item),countryName:item.name,flagIconName:item.code})},`phone_countries_list_${item.code}`)))]})};CountryDropBoxList.__docgenInfo={description:"",methods:[],displayName:"CountryDropBoxList"};const form_CountryDropBoxList=CountryDropBoxList;var ModalComponent=__webpack_require__("./src/components/utils/ModalComponent.jsx");const CountryDropBox=props=>{const[customField,setField]=(0,react.useState)({...props.field}),[isOpenedDropbox,toggleDropbox]=(0,react.useState)(!1),REMOVE_POST_CODE_FOR_COUNTRY=[784];(0,react.useEffect)((()=>{props.field.value&&props.country_list&&props.country_list.forEach((item=>{item.id===parseInt(props.field.value)&&setField((0,Immutability.Z)(customField,{value:{$set:item.name}}))}))}),[]);const closeDropbox=()=>{toggleDropbox(!1)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(InputText.Z,{isReadOnly:props.readOnly,onClick:()=>{toggleDropbox(!0)},field:customField,customValue:props.customValue,formName:props.formName,autoFocus:props.focus,onFocus:props.onFocus,onChange:props.onChange,validateOnBlur:!1,onBlur:props.onBlur,isNewInput:!0,isPseudoSelect:!0}),isOpenedDropbox&&(0,jsx_runtime.jsx)(ModalComponent.Z,{canCloseModal:!1,children:(0,jsx_runtime.jsx)(form_CountryDropBoxList,{selectItem:(e,item)=>{const hideIndex=REMOVE_POST_CODE_FOR_COUNTRY.find((function(element){return parseInt(item.id)===element}));props.fieldPostCode&&hideIndex?props.changeFormField(props.formName,(0,Immutability.Z)(props.fieldPostCode,{mandatory:{$set:!1},visible:{$set:!1},value:{$set:"   "}})):props.fieldPostCode&&!props.fieldPostCode.visible&&props.changeFormField(props.formName,(0,Immutability.Z)(props.fieldPostCode,{mandatory:{$set:!0},visible:{$set:!0},value:{$set:""}})),props.changeFormFieldValue(props.formName,item.id,props.field.name),setField((0,Immutability.Z)(props.field,{value:{$set:item.name}})),closeDropbox()},searchPlaceholder:props.searchPlaceholder,searchDropBoxEmpty:props.searchDropBoxEmpty,items:props.field.strapiField?props.field.items:props.country_list,isStrapiField:props.field.strapiField,id:props.field.id,name:props.field.name,onCloseButtonClick:closeDropbox})})]})};CountryDropBox.__docgenInfo={description:"",methods:[],displayName:"CountryDropBox"};const form_CountryDropBox=(0,es.$j)(((state,ownProps)=>({fieldPostCode:state.form[ownProps.formName].fields.post_code,searchPlaceholder:state.messages.jsMessages["site.field.search.placeholder"],searchDropBoxEmpty:state.messages.jsMessages["site.search.dropdox.empty"],country_list:state.extra.country_list})),{changeFormFieldValue:formAction.Az,changeFormField:formAction.Qd})(CountryDropBox);var _Example$parameters,_Example$parameters2;const CountryDropBox_stories={title:"Form Components/CountryDropBox",component:form_CountryDropBox,decorators:[StoreDecorator.Z],parameters:{state:{form:{CountryDropBoxForm:{fields:{}}},extra:{country_list:[{id:8,name:"Albania",nameEn:"Albania",synonym:"Albanien अल्बानिया Албания Albania Албания Albania Albania Albanie Albania 阿尔巴尼亚 Albánie Албанія Albania Albania Arnavutluk",code:"al",prefix:"+355",firstLetter:"A"},{id:9,name:"Algeria",nameEn:"Algeria",synonym:"Albanien अल्बानिया Албания Albania Албания Albania Albania Albanie Albania 阿尔巴尼亚 Albánie Албанія Albania Albania Arnavutluk",code:"dz",prefix:"+213",firstLetter:"A"}]}}}},Template=args=>(0,jsx_runtime.jsx)(Row.X,{indent:"24px",children:(0,jsx_runtime.jsx)(form_CountryDropBox,{formName:"CountryDropBoxForm",...args})});Template.displayName="Template";const Example=Template.bind({});Example.args={field:{name:"country",placeholder:"Choose your country"}},Example.parameters={...Example.parameters,docs:{...null===(_Example$parameters=Example.parameters)||void 0===_Example$parameters?void 0:_Example$parameters.docs,source:{originalSource:"args => <Row indent=\"24px\">\n        <CountryDropBox formName={'CountryDropBoxForm'} {...args} />\n    </Row>",...null===(_Example$parameters2=Example.parameters)||void 0===_Example$parameters2||null===(_Example$parameters2=_Example$parameters2.docs)||void 0===_Example$parameters2?void 0:_Example$parameters2.source}}};const __namedExportsOrder=["Example"]},"./src/components/form-multi/InputText.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var constants_FieldType__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/constants/FieldType.js"),helpers_customPropTypes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/customPropTypes.js"),_InputBase__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/form-multi/InputBase.js"),_constants_formName__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/constants/formName.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InputText=props=>{const field=props.field;null===field.value&&(field.value="");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{id:props.id?props.id:field.name,name:field.canonicalPath?field.canonicalPath:field.name,maxLength:props.setMaxLength&&field.maxLength?field.maxLength:"",value:props.customValue||field.value,type:field.type,className:props.isNewInput?null:"field field-duo",autoComplete:(()=>{const fieldName=null==field?void 0:field.name;let autocompleteValue="off";if(props.formName===_constants_formName__WEBPACK_IMPORTED_MODULE_4__.dJ)switch(fieldName){case"name":autocompleteValue="given-name";break;case"name_f":autocompleteValue="family-name";break;case"address":autocompleteValue="street-address";break;case"email":autocompleteValue="email";break;default:autocompleteValue="disabled"}return autocompleteValue})(),readOnly:props.isReadOnly||field.isReadOnly,autoFocus:props.focus,onClick:props.onClick,onFocus:props.onFocus,onChange:props.onChange,onBlur:props.onBlur})};InputText.displayName="InputText",InputText.propTypes=(0,helpers_customPropTypes__WEBPACK_IMPORTED_MODULE_1__.$k)([constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.si,"tel","email","number","upload_doc","password","search","digital",constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.RL,constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.lD,"short_text","url",constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.Hu,"hidden",constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.fd,constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.qz,constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.fQ,constants_FieldType__WEBPACK_IMPORTED_MODULE_5__.JO]),InputText.__docgenInfo={description:"",methods:[],displayName:"InputText",composes:["helpers/customPropTypes"]};const __WEBPACK_DEFAULT_EXPORT__=(0,_InputBase__WEBPACK_IMPORTED_MODULE_2__.Z)(InputText)},"./node_modules/react-swipeable/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QS:()=>useSwipeable});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const LEFT="Left",RIGHT="Right",UP="Up",DOWN="Down",defaultProps={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},initialState={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},mouseMove="mousemove",mouseUp="mouseup",touchEnd="touchend",touchMove="touchmove",touchStart="touchstart";function rotateXYByAngle(pos,angle){if(0===angle)return pos;const angleInRadians=Math.PI/180*angle;return[pos[0]*Math.cos(angleInRadians)+pos[1]*Math.sin(angleInRadians),pos[1]*Math.cos(angleInRadians)-pos[0]*Math.sin(angleInRadians)]}function getHandlers(set,handlerProps){const onStart=event=>{const isTouch="touches"in event;isTouch&&event.touches.length>1||set(((state,props)=>{props.trackMouse&&!isTouch&&(document.addEventListener(mouseMove,onMove),document.addEventListener(mouseUp,onUp));const{clientX,clientY}=isTouch?event.touches[0]:event,xy=rotateXYByAngle([clientX,clientY],props.rotationAngle);return props.onTouchStartOrOnMouseDown&&props.onTouchStartOrOnMouseDown({event}),Object.assign(Object.assign(Object.assign({},state),initialState),{initial:xy.slice(),xy,start:event.timeStamp||0})}))},onMove=event=>{set(((state,props)=>{const isTouch="touches"in event;if(isTouch&&event.touches.length>1)return state;if(event.timeStamp-state.start>props.swipeDuration)return state.swiping?Object.assign(Object.assign({},state),{swiping:!1}):state;const{clientX,clientY}=isTouch?event.touches[0]:event,[x,y]=rotateXYByAngle([clientX,clientY],props.rotationAngle),deltaX=x-state.xy[0],deltaY=y-state.xy[1],absX=Math.abs(deltaX),absY=Math.abs(deltaY),time=(event.timeStamp||0)-state.start,velocity=Math.sqrt(absX*absX+absY*absY)/(time||1),vxvy=[deltaX/(time||1),deltaY/(time||1)],dir=function getDirection(absX,absY,deltaX,deltaY){return absX>absY?deltaX>0?RIGHT:LEFT:deltaY>0?DOWN:UP}(absX,absY,deltaX,deltaY),delta="number"==typeof props.delta?props.delta:props.delta[dir.toLowerCase()]||defaultProps.delta;if(absX<delta&&absY<delta&&!state.swiping)return state;const eventData={absX,absY,deltaX,deltaY,dir,event,first:state.first,initial:state.initial,velocity,vxvy};eventData.first&&props.onSwipeStart&&props.onSwipeStart(eventData),props.onSwiping&&props.onSwiping(eventData);let cancelablePageSwipe=!1;return(props.onSwiping||props.onSwiped||props[`onSwiped${dir}`])&&(cancelablePageSwipe=!0),cancelablePageSwipe&&props.preventScrollOnSwipe&&props.trackTouch&&event.cancelable&&event.preventDefault(),Object.assign(Object.assign({},state),{first:!1,eventData,swiping:!0})}))},onEnd=event=>{set(((state,props)=>{let eventData;if(state.swiping&&state.eventData){if(event.timeStamp-state.start<props.swipeDuration){eventData=Object.assign(Object.assign({},state.eventData),{event}),props.onSwiped&&props.onSwiped(eventData);const onSwipedDir=props[`onSwiped${eventData.dir}`];onSwipedDir&&onSwipedDir(eventData)}}else props.onTap&&props.onTap({event});return props.onTouchEndOrOnMouseUp&&props.onTouchEndOrOnMouseUp({event}),Object.assign(Object.assign(Object.assign({},state),initialState),{eventData})}))},onUp=e=>{document.removeEventListener(mouseMove,onMove),document.removeEventListener(mouseUp,onUp),onEnd(e)},attachTouch=(el,props)=>{let cleanup=()=>{};if(el&&el.addEventListener){const baseOptions=Object.assign(Object.assign({},defaultProps.touchEventOptions),props.touchEventOptions),tls=[[touchStart,onStart,baseOptions],[touchMove,onMove,Object.assign(Object.assign({},baseOptions),props.preventScrollOnSwipe?{passive:!1}:{})],[touchEnd,onEnd,baseOptions]];tls.forEach((([e,h,o])=>el.addEventListener(e,h,o))),cleanup=()=>tls.forEach((([e,h])=>el.removeEventListener(e,h)))}return cleanup},output={ref:el=>{null!==el&&set(((state,props)=>{if(state.el===el)return state;const addState={};return state.el&&state.el!==el&&state.cleanUpTouch&&(state.cleanUpTouch(),addState.cleanUpTouch=void 0),props.trackTouch&&el&&(addState.cleanUpTouch=attachTouch(el,props)),Object.assign(Object.assign(Object.assign({},state),{el}),addState)}))}};return handlerProps.trackMouse&&(output.onMouseDown=onStart),[output,attachTouch]}function useSwipeable(options){const{trackMouse}=options,transientState=react__WEBPACK_IMPORTED_MODULE_0__.useRef(Object.assign({},initialState)),transientProps=react__WEBPACK_IMPORTED_MODULE_0__.useRef(Object.assign({},defaultProps)),previousProps=react__WEBPACK_IMPORTED_MODULE_0__.useRef(Object.assign({},transientProps.current));let defaultKey;for(defaultKey in previousProps.current=Object.assign({},transientProps.current),transientProps.current=Object.assign(Object.assign({},defaultProps),options),defaultProps)void 0===transientProps.current[defaultKey]&&(transientProps.current[defaultKey]=defaultProps[defaultKey]);const[handlers,attachTouch]=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>getHandlers((stateSetter=>transientState.current=stateSetter(transientState.current,transientProps.current)),{trackMouse})),[trackMouse]);return transientState.current=function updateTransientState(state,props,previousProps,attachTouch){return props.trackTouch&&state.el?state.cleanUpTouch?props.preventScrollOnSwipe!==previousProps.preventScrollOnSwipe||props.touchEventOptions.passive!==previousProps.touchEventOptions.passive?(state.cleanUpTouch(),Object.assign(Object.assign({},state),{cleanUpTouch:attachTouch(state.el,props)})):state:Object.assign(Object.assign({},state),{cleanUpTouch:attachTouch(state.el,props)}):(state.cleanUpTouch&&state.cleanUpTouch(),Object.assign(Object.assign({},state),{cleanUpTouch:void 0}))}(transientState.current,transientProps.current,previousProps.current,attachTouch),handlers}}}]);